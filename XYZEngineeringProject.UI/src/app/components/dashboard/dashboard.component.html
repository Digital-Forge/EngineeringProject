<div class="container-fluid my-5" *ngIf="isAuthorized; else notAuthorized">
    <div class="row">
        <div class="col-12 col-md-6 ">
            <h1 class="text-center text-md-start text-capitalize">
                {{ 'Dashboard.welcome' | translate }}, {{ user.name }} {{ user.surname }}
            </h1>
        </div>
        <div class="col-12 col-md-6">
            <h4 class="text-center text-md-end mt-2">
                <i class="bi bi-calendar4-week me-1"></i> {{ ('Weekday.' + (today | date: 'EEEE')) | translate}}, {{
                    today | date: 'dd'}} {{ ('MonthDate.' + (today | date: 'MMMM')) | translate }}
            </h4>
        </div>
    </div>
    <div class="row mt-3">
        <div class="col-12 col-lg-4">
            <div class="shadow-primary br-5 p-3 my-2 m-lg-0">
                <h4>{{ "Dashboard.todayTasks" | translate }} ({{ todayTasks.length }})</h4>
                <div *ngFor="let task of todayTasks | slice:0:5">
                        {{ task.deadline | date: 'yyyy-MM-dd'}}
                        {{ task.title | slice: 0:100 }}
                </div>
                <h4 class="mt-3">{{ "Dashboard.futureTasks" | translate }} ({{ futureTasks.length }})</h4>
                <div *ngFor="let task of futureTasks | slice:0:5">
                        {{ task.deadline | date: 'yyyy-MM-dd'}}
                        {{ task.title | slice: 0:100 }}
                </div>
                <div class="d-flex justify-content-end">
                    <a class="btn btn-sm btn-secondary" [routerLink]="['/task-list']">{{ 'Dashboard.seeAll' | translate }}</a>
                </div>
            </div>
        </div>
        <div class="col-12 col-lg-4">
            <div class="shadow-primary br-5 p-3 my-2 m-lg-0">
                <h4>{{ "Dashboard.latestNotes" | translate }} ({{ notes.length }})</h4>
                <div *ngFor="let note of notes | slice:0:10">
                        {{ note.date | date: 'yyyy-MM-dd'}}
                        {{ ("NoteStatus." + noteStatuses[note.noteStatus] | translate) || '-'}}
                        {{ note.title | slice: 0:100 }}
                </div>
                <div class="d-flex justify-content-end">
                    <a class="btn btn-sm btn-secondary" [routerLink]="['/note']">{{ 'Dashboard.seeAll' | translate }}</a>
                </div>
            </div>           
        </div>
        <div class="col-12 col-lg-4">
            <div class="shadow-primary br-5 p-3 my-2 m-lg-0">
                <h4>{{ "Dashboard.messages" | translate }} ({{ messages.length }})</h4>
                <span style="color: red">TODO</span>
                <!-- <div *ngFor="let message of messages | slice:0:10">
                        {{ note.date | date: 'yyyy-MM-dd'}}
                        {{ ("NoteStatus." + noteStatuses[note.noteStatus] | translate) || '-'}}
                        {{ note.title | slice: 0:100 }}
                </div>
                <div class="d-flex justify-content-end">
                    <a class="btn btn-sm btn-secondary" [routerLink]="['/note']">{{ 'Dashboard.seeAll' | translate }}</a>
                </div> -->
            </div>
        </div>  
    </div>
</div>

<ng-template #notAuthorized>
    <div class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
            <span class="sr-only"></span>
        </div>
    </div>  
</ng-template>