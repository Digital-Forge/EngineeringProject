<div class="container-fluid my-5">
    <div *ngIf="formMode == FormMode.Edit; else header" class="row mb-5 text-center">
        <h1 class="mb-3 col-12">{{ 'User.editUser' | translate }}</h1>
    </div>
    <ng-template #header>
        <div class="row text-center">
            <h1 class="mb-3 col-12">{{ 'User.addUser' | translate }}</h1>
        </div>
    </ng-template>

    <div class="col-8 offset-2 form">
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <div class="row">
                <div class="mb-3 col-12 col-lg-6">
                    <label class="form-label" for="userUserName">{{ 'User.userName' | translate }}</label>
                    <input class="form-control" type="text" id="userUserName" formControlName="userUserName">
                </div>
                <div class="mb-3 col-12 col-lg-6">
                    <label *ngIf="!userDetails.passwordHash" class="form-label" for="userPassword">{{ 'User.setPassword' | translate }}</label>
                    <label *ngIf="userDetails.passwordHash" class="form-label" for="userPassword">{{ 'User.changePassword' | translate }}</label>
                    <div class="input-group">
                        <input class="form-control" [type]="isPasswordVisible ? 'text' : 'password'" id="userPassword"
                            formControlName="userPassword">
                        <div class="input-group-append cursor-pointer" (click)="togglePasswordVisibility()">
                            <span class="input-group-text" id="password-visibility">
                                <i class="bi" [ngClass]="{ 'bi-eye-slash': isPasswordVisible, 'bi-eye': !isPasswordVisible}"></i>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-12 col-lg-6">
                    <label class="form-label" for="name">{{ 'User.name' | translate }}</label>
                    <input class="form-control" type="text" id="name" formControlName="name">
                </div>
                <div class="mb-3 col-12 col-lg-6">
                    <label class="form-label" for="surname">{{ 'User.surname' | translate }} *</label>
                    <input class="form-control" type="text" id="surname" formControlName="surname">
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-12 col-lg-6">
                    <label class="form-label" for="phone">{{ 'User.phone' | translate }}</label>
                    <input class="form-control" type="number" id="phone" formControlName="phone">
                </div>
                <div class="mb-3 col-12 col-lg-6">
                    <label class="form-label" for="pesel">{{ 'User.pesel' | translate }}</label>
                    <input class="form-control" type="number" id="pesel" formControlName="pesel">
                </div>
            </div>

            <h3 class="form-label">{{ 'User.address' | translate }}</h3>
            <div class="row">
                <div class="mb-3 col-12">
                    <label class="form-label" for="addressHome">{{ 'User.homeAddress' | translate }}</label>
                    <input class="form-control" type="text" id="addressHome" formControlName="addressHome">
                </div>
            </div>
            <div class="row">
                <div class="mb-3 col-12">
                    <label class="form-label" for="addressPost">{{ 'User.postAddress' | translate }}</label>
                    <input class="form-control" type="text" id="addressPost" formControlName="addressPost">
                </div>
            </div>
            <h3 class="form-label" *ngIf="formMode==FormMode.Edit">{{'User.roles' | translate}}</h3>
                <div class="row" *ngIf="formMode==FormMode.Edit">
                    <table>
                        <tr>
                            <th>Role</th>
                            <th>action</th>                            
                        </tr>
                    <div *ngFor="let role of userRoles; let i = index">
                                <tr>
                                    <td>{{role}}</td>
                                    <td><button (click)="deleteRole(i)" *ngIf="role.toString()!='EMPLOYEE'">DeleteRole</button></td>
                                </tr>
                        </div>
                    </table>
                </div>
            <div *ngIf="allRoles.length>0">
                <select formControlName="newRole" id="newRole">
                    <option *ngFor="let role of allRoles">
                        {{role.toString()}}
                    </option>
                </select>
                <button (click)="addRole()">Add Role</button>
            </div>

            <div class="row">
                <div class="col text-center text-sm-end">
                    <button type="submit" class="btn btn-primary" [disabled]="!userForm.valid"
                        *ngIf="formMode == FormMode.Edit">{{
                        'Button.save' | translate}}</button>
                    <button type="submit" class="btn btn-primary" [disabled]="!userForm.valid"
                        *ngIf="formMode == FormMode.Add">{{
                        'Button.addUser' | translate}}</button>
                </div>
            </div>
        </form>
    </div>
</div>